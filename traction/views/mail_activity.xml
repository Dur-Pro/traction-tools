<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="traction_mail_activity_form" model="ir.ui.view">
        <field name="name">traction.team.form</field>
        <field name="model">mail.activity</field>
        <field name="inherit_id" ref="mail.mail_activity_view_form_popup"/>
        <field name="arch" type="xml">
            <field name="date_deadline" position="after">
                <field name="needs_team_id" invisible="1"/>
                <field name="team_id"
                       attrs="{'invisible': [('needs_team_id', '=', False)]}"/>
            </field>
        </field>
    </record>
    <record id="traction_mail_activity_view_form_reload_on_close" model="ir.ui.view">
        <field name="name">traction.mail.activity.view.form.reload</field>
        <field name="model">mail.activity</field>
        <field name="inherit_id" ref="traction_mail_activity_form"/>
        <field name="mode">primary</field>
        <field name="arch" type="xml">
            <button name="action_done" position="attributes">
                <attribute name="context">
                    {'mail_activity_quick_update': True, 'reload_on_close': True}
                </attribute>
            </button>
            <button name="action_done_schedule_next" position="attributes">
                <attribute name="context">
                    {'mail_activity_quick_update': True, 'reload_on_close': True}
                </attribute>
            </button>
            <button name="action_close_dialog" position="attributes">
                <attribute name="context">
                    {'mail_activity_quick_update': True, 'reload_on_close': True}
                </attribute>
            </button>
        </field>
    </record>
</odoo>